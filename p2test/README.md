https://github.com/lorenzo-stoakes/linux-vm-notes/blob/master/sections/page-tables.md

https://www.kernel.org/doc/html/latest/vm/arch_pgtable_helpers.html?highlight=pmd

这个helper里面很多东西没了，可以提个patch

https://www.kernel.org/doc/Documentation/printk-formats.txt

https://wiki.osdev.org/CPU_Registers_x86-64#IA32_EFER



```
static inline pgd_t *pgd_offset_pgd(pgd_t *pgd, unsigned long address)
{
	return (pgd + pgd_index(address));
};

/*
 * a shortcut to get a pgd_t in a given mm
 */
#ifndef pgd_offset
#define pgd_offset(mm, address)		pgd_offset_pgd((mm)->pgd, (address))
#endif
```

[  681.314918] pgd : ffff88816c6beff8  260f067, index: 511
[  681.314918] p4d : ffff88816c6beff8  260f067, index: 0
[  681.314918] pud : ffff88800260fff0  2610063, index: 510
[  681.314919] pmd: ffff888002610040, 10000e1

[ 3565.996698] pgd : ffff88816c774ff8  260f067, index: 511
[ 3565.996699] p4d : ffff88816c774ff8  260f067, index: 0
[ 3565.996699] pud : ffff88800260fff0  2610063, index: 510
[ 3565.996699] pmd: ffff888002610040, 10000e1

[66142.314600] pgd : ffff88816dba2ff8  260f067, index: 511
[66142.314601] p4d : ffff88816dba2ff8  260f067, index: 0
[66142.314601] pud : ffff88800260fff0  2610063, index: 510
[66142.314602] pmd: ffff888002610040, 10000e1

[66174.946284] pgd : ffff8881488deff8  260f067, index: 511
[66174.946285] p4d : ffff8881488deff8  260f067, index: 0
[66174.946285] pud : ffff88800260fff0  2610063, index: 510
[66174.946285] pmd: ffff888002610040, 10000e1
[66174.955330] hello exit


[  276.484572] pgds: ffff88812a162000
[  276.484769] pgd[369]: ffff88812a162b88  139574067  [ffffb88000000000, ffffb90000000000]
[  355.872916] pgd[369]: ffff88812f1e8b88  139574067  [ffffb88000000000, ffffb90000000000]

[  276.484770] pgd[370]: ffff88812a162b90  139575067  [ffffb90000000000, ffffb98000000000]
[  276.484770] pgd[371]: ffff88812a162b98  139576067  [ffffb98000000000, ffffba0000000000]
[  276.484771] pgd[372]: ffff88812a162ba0  139577067  [ffffba0000000000, ffffba8000000000]
[  276.484771] pgd[373]: ffff88812a162ba8  139578067  [ffffba8000000000, ffffbb0000000000]
[  276.484772] pgd[374]: ffff88812a162bb0  139579067  [ffffbb0000000000, ffffbb8000000000]
[  276.484773] pgd[375]: ffff88812a162bb8  13957a067  [ffffbb8000000000, ffffbc0000000000]
[  276.484773] pgd[376]: ffff88812a162bc0  13957b067  [ffffbc0000000000, ffffbc8000000000]
[  276.484774] pgd[377]: ffff88812a162bc8  13957c067  [ffffbc8000000000, ffffbd0000000000]
[  276.484774] pgd[378]: ffff88812a162bd0  13957d067  [ffffbd0000000000, ffffbd8000000000]
[  276.484775] pgd[379]: ffff88812a162bd8  13957e067  [ffffbd8000000000, ffffbe0000000000]
[  276.484775] pgd[380]: ffff88812a162be0  13957f067  [ffffbe0000000000, ffffbe8000000000]
[  276.484776] pgd[381]: ffff88812a162be8  139580067  [ffffbe8000000000, ffffbf0000000000]
[  276.484776] pgd[382]: ffff88812a162bf0  139581067  [ffffbf0000000000, ffffbf8000000000]
[  276.484777] pgd[383]: ffff88812a162bf8  139582067  [ffffbf8000000000, ffffc00000000000]
[  276.484778] pgd[384]: ffff88812a162c00  139583067  [ffffc00000000000, ffffc08000000000]
[  276.484778] pgd[385]: ffff88812a162c08  139584067  [ffffc08000000000, ffffc10000000000]
[  276.484779] pgd[386]: ffff88812a162c10  139585067  [ffffc10000000000, ffffc18000000000]
[  276.484779] pgd[387]: ffff88812a162c18  139586067  [ffffc18000000000, ffffc20000000000]
[  276.484780] pgd[388]: ffff88812a162c20  139587067  [ffffc20000000000, ffffc28000000000]
[  276.484780] pgd[389]: ffff88812a162c28  139588067  [ffffc28000000000, ffffc30000000000]
[  276.484781] pgd[390]: ffff88812a162c30  139589067  [ffffc30000000000, ffffc38000000000]
[  276.484781] pgd[391]: ffff88812a162c38  13958a067  [ffffc38000000000, ffffc40000000000]
[  276.484782] pgd[392]: ffff88812a162c40  13958b067  [ffffc40000000000, ffffc48000000000]
[  276.484783] pgd[393]: ffff88812a162c48  13958c067  [ffffc48000000000, ffffc50000000000]
[  276.484783] pgd[394]: ffff88812a162c50  13958d067  [ffffc50000000000, ffffc58000000000]
[  276.484784] pgd[395]: ffff88812a162c58  13958e067  [ffffc58000000000, ffffc60000000000]
[  276.484784] pgd[396]: ffff88812a162c60  13958f067  [ffffc60000000000, ffffc68000000000]
[  276.484785] pgd[397]: ffff88812a162c68  139590067  [ffffc68000000000, ffffc70000000000]
[  276.484785] pgd[398]: ffff88812a162c70  139591067  [ffffc70000000000, ffffc78000000000]
[  276.484786] pgd[399]: ffff88812a162c78  139592067  [ffffc78000000000, ffffc80000000000]
[  276.484786] pgd[400]: ffff88812a162c80  139593067  [ffffc80000000000, ffffc88000000000]
[  276.484787] pgd[401]: ffff88812a162c88  0  [ffffc88000000000, ffffc90000000000]